---
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, chapter, updatedDate, heroImage, slug } =
  Astro.props;
---

<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
    <style>
      .title {
        font-size: 1.85rem;
        margin: 0.25em 0 0;
      }
      hr {
        border-top: 1px solid #ddd;
        margin: 1rem 0;
      }
      a {
        all: unset;
      }
      #action-button {
        position: fixed;
        bottom: 0;
        left: 0;
        margin-left: 1rem;
        margin-bottom: 1rem;
        height: 3rem;
        /* background: #aff564; */
      }
      .action-button-desktop {
        display: none;
        background-color: #aff564;
        border-width: 0.1px;
        border-radius: 10px;
        font-size: 1.15rem;
        font-family: monospace;
        /* -webkit-text-fill-color: white; */
      }
      @media (min-width: 500px) {
        #action-button {
          display: none;
        }
        .action-button-desktop {
          display: inline;
        }
      }
    </style>
  </head>
  <script>
    const BackButton = document.getElementById("back-button");
    BackButton.addEventListener("click", () => {
      history.back();
    });
  </script>

  <body>
    <Header />
    <main>
      <article>
        {heroImage && <img width={720} height={360} src={heroImage} alt="" />}
        <h1 class="title">{title}</h1>
        {pubDate && <time>{pubDate}</time>}
        {
          chapter && (
            <div style="width: full; display: flex; flex-direction: row; justify-content: space-between; padding-top: 1.5rem; margin-bottom: 1.75rem">
              <h4 style="margin-top: 0.15rem; margin-bottom: -0.35rem; font-family: monospace; font-size: 1.25rem; text-transform: uppercase; display: inline">
                Chapter {chapter}
              </h4>
              {slug.includes("_answers") ? (
                <button
                  class="action-button-desktop"
                  id="back-button"
                  style="padding-top: 0rem; padding-bottom: 0rem; margin-bottom: -0.75rem;"
                >
                  Go Back
                </button>
              ) : (
                <button
                  class="action-button-desktop"
                  style="padding-top: 0rem; padding-bottom: 0rem; margin-bottom: -0.75rem;"
                >
                  <a href={`/CS_1102/${slug}_answers/`}>Check Answers</a>
                </button>
              )}
              <div id="action-button">
                {slug.includes("_answers") ? (
                  <button
                    id="back-button"
                    style="height: 100%; font-size: 1.35rem; font-family: monospace; border-radius: 13.5px; border-width: 0.1px; background-color: #aff564;"
                  >
                    Go Back
                  </button>
                ) : (
                  <button style="height: 100%; font-size: 1.35rem; font-family: monospace; border-radius: 13.5px; border-width: 0.1px; background-color: #aff564;">
                    <a href={`/CS_1102/${slug}_answers/`}>Check Answers</a>
                  </button>
                )}
              </div>
            </div>
          )
        }
        {
          updatedDate && (
            <div>
              Last updated on <time>{updatedDate}</time>
            </div>
          )
        }
        <hr />
        <slot />
      </article>
    </main>
    <Footer />
  </body>
</html>
